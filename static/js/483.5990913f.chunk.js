/*! For license information please see 483.5990913f.chunk.js.LICENSE.txt */
(self.webpackChunkway_of_the_samurai=self.webpackChunkway_of_the_samurai||[]).push([[483],{6706:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return Y}});var r=s(1413),t=s(5671),o=s(3144),a=s(136),i=s(516),c=s(364),u=s(2791),l={UsersContainer:"Users_UsersContainer__APWY7",UsersList:"Users_UsersList__tpKTn",UserItem:"Users_UserItem__-dAA8",UserPhotoContainer:"Users_UserPhotoContainer__iSWYa",UserPhoto:"Users_UserPhoto__mSwM+",UserGeneralInformation:"Users_UserGeneralInformation__NmIcC",UserName:"Users_UserName__XStFL",UserStatus:"Users_UserStatus__6MRjH",ActivePage:"Users_ActivePage__p3BQt",Page:"Users_Page__JrVAC",ButtonContainer:"Users_ButtonContainer__kmqJk"},g=s(4942),f=s(9439),p="Pagination_Paginator__ZgK+q",d="Pagination_ChangeSetButton__ye7OM",h="Pagination_PaginationContainer__W+Bx0",U="Pagination_pageNumber__0Y6iY",m="Pagination_selectedPage__h0sGb",_=s(1694),v=s.n(_),C=s(184),P=function(e){for(var n=e.pageSize,s=e.totalItemsCount,r=e.currentPage,t=e.changePage,o=e.getUsersTC,a=e.portionSize,i=Math.ceil(s/n),c=[],l=1;l<=i;l++)c.push(l);var _=Math.ceil(i/a),P=(0,u.useState)(1),x=(0,f.Z)(P,2),b=x[0],j=x[1],N=(b-1)*a+1,S=b*a;return(0,C.jsxs)("div",{className:p,children:[b>1&&(0,C.jsx)("button",{className:d,onClick:function(){j(b-1)},children:"PREV"}),(0,C.jsx)("div",{className:h,children:c.filter((function(e){return e>=N&&e<=S})).map((function(e){return(0,C.jsx)("span",{className:v()((0,g.Z)({},m,r===e),U),onClick:function(s){!function(e){t(e);var s="?page=".concat(e),r="&count=".concat(n);o("/users",s,r)}(e)},children:e},e)}))}),_>b&&(0,C.jsx)("button",{className:d,onClick:function(){j(b+1)},children:"NEXT"})]})},x=s(6395),b=s(7689),j=s(3220),N=s(1087),S=s.p+"static/media/default-user.00f4f37bfd63382fd77e.png",y=function(e){var n,s,r=e.user,t=e.subscribeUsersTC,o=e.unsubscribeUsersTC,a=e.followingInProgress,i=e.userKey;return(0,C.jsxs)("li",{className:l.UserItem,children:[(0,C.jsx)(N.OL,{to:"/profile/"+i,children:(0,C.jsx)("div",{className:l.UserPhotoContainer,children:(0,C.jsx)("img",{src:null!=r.photos.small?r.photos.small:S,alt:null!=r.photos.small?r.photos.small:S,className:l.UserPhoto})})}),(0,C.jsxs)("div",{className:l.UserGeneralInformation,children:[(0,C.jsx)("span",{className:l.UserName,children:r.name}),(0,C.jsx)("span",{className:l.UserStatus,children:r.status})]}),(0,C.jsxs)("span",{className:l.UserLocation,children:[(0,C.jsx)("div",{className:l.UserLocationCity,children:null===(n=r.location)||void 0===n?void 0:n.city}),(0,C.jsx)("div",{className:l.UserLocationCountry,children:null===(s=r.location)||void 0===s?void 0:s.country})]}),(0,C.jsx)("div",{children:(0,C.jsx)("div",{className:l.ButtonContainer,children:r.followed?(0,C.jsx)("button",{disabled:a.some((function(e){return e===r.id})),onClick:function(){o(r.id)},children:"Unsubscribe"}):(0,C.jsx)("button",{disabled:a.some((function(e){return e===r.id})),onClick:function(){t(r.id)},children:"Subscribe"})})})]},i)},T=s(4165),k=s(5861),w=s(4098),Z=s(3190),I=function(e){return console.log(e),function(){var n=(0,k.Z)((0,T.Z)().mark((function n(s){var r;return(0,T.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,console.log(e),s((0,Z.TT)(!0,e)),console.log(e),n.next=7,w.g8.subscribeUsersProfile(e);case 7:r=n.sent,console.log(r.data.resultCode),0===r.data.resultCode&&s((0,Z.WA)(e)),s((0,Z.TT)(!1,e)),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(e),console.error("error");case 17:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},A=function(e){return console.log(e),function(){var n=(0,k.Z)((0,T.Z)().mark((function n(s){return(0,T.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,console.log(e),s((0,Z.TT)(!0,e)),n.next=6,w.g8.unsubscribeUsersProfile(e);case 6:0===n.sent.data.resultCode&&s((0,Z.d9)(e)),s((0,Z.TT)(!1,e)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(e),console.error("error");case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},z=function(e){var n=e.users,s=e.pageSize,r=e.totalUsersCount,t=e.currentPage,o=e.isFetching,a=e.isAuth,i=e.changePage,c=e.getUsersTC,u=e.followingInProgress,g=e.portionSize,f=void 0===g?10:g;return a?(0,C.jsxs)("div",{className:l.UsersContainer,children:[(0,C.jsx)(x.Z,{isFetching:o}),(0,C.jsx)("div",{className:l.PaginationContainer,children:(0,C.jsx)(P,{pageSize:s,totalItemsCount:r,currentPage:t,changePage:i,getUsersTC:c,portionSize:f})}),(0,C.jsx)("ul",{className:l.UsersList,children:n.map((function(e){return(0,C.jsx)("div",{children:(0,C.jsx)(y,{user:e,userKey:e.id,subscribeUsersTC:I,unsubscribeUsersTC:A,followingInProgress:u})},e.id)}))})]}):(0,C.jsx)(b.Fg,{to:j.r.LOGIN})},L=s(2111),O=s(7781),B=function(e){return e.usersPage.users},F=function(e){return e.usersPage.pageSize},M=function(e){return e.usersPage.totalUsersCount},G=function(e){return e.usersPage.currentPage},K=function(e){return e.usersPage.isFetching},R=function(e){return e.usersPage.followingInProgress},W=function(e){(0,a.Z)(s,e);var n=(0,i.Z)(s);function s(){return(0,t.Z)(this,s),n.apply(this,arguments)}return(0,o.Z)(s,[{key:"componentDidMount",value:function(){var e="?page=".concat(this.props.currentPage),n="&count=".concat(this.props.pageSize);this.props.getUsersTC("/users",e,n)}},{key:"render",value:function(){return(0,C.jsx)(z,(0,r.Z)({},this.props))}}]),s}(u.Component),Y=(0,O.qC)((0,c.$j)((function(e){return{users:B(e),pageSize:F(e),totalUsersCount:M(e),currentPage:G(e),isFetching:K(e),followingInProgress:R(e)}}),{setUsers:Z.Ro,changePage:Z.O9,getUsersTC:function(e,n,s){return function(){var r=(0,k.Z)((0,T.Z)().mark((function r(t){var o;return(0,T.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t((0,Z.m9)(!0)),r.next=3,w.g8.getUsers(e,n,s);case 3:o=r.sent,t((0,Z.Ro)(o.data.items)),t((0,Z.O_)(o.data.totalCount)),t((0,Z.m9)(!1));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},subscribeUsersTC:I,unsubscribeUsersTC:A}),L.D)(W)},1694:function(e,n){var s;!function(){"use strict";var r={}.hasOwnProperty;function t(){for(var e=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var o=typeof s;if("string"===o||"number"===o)e.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&e.push(a)}}else if("object"===o){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){e.push(s.toString());continue}for(var i in s)r.call(s,i)&&s[i]&&e.push(i)}}}return e.join(" ")}e.exports?(t.default=t,e.exports=t):void 0===(s=function(){return t}.apply(n,[]))||(e.exports=s)}()}}]);
//# sourceMappingURL=483.5990913f.chunk.js.map