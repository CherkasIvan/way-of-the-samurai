{"ast":null,"code":"import { StoreEnum } from '../../utils/enums/store.enum';\nconst initialState = {\n  users: [],\n  pageSize: 20,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingInProgress: []\n};\nconst usersReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case StoreEnum.USER_SUBSCRIBE:\n      {\n        return {\n          ...state,\n          users: state.users.map(user => {\n            if (user.id === action.payload) {\n              return {\n                ...user,\n                followed: true\n              };\n            }\n            return user;\n          })\n        };\n      }\n    case StoreEnum.USER_UNSUBSCRIBE:\n      {\n        return {\n          ...state,\n          users: state.users.map(user => {\n            if (user.id === action.payload) {\n              return {\n                ...user,\n                followed: false\n              };\n            }\n            return user;\n          })\n        };\n      }\n    case StoreEnum.SET_USERS:\n      {\n        return {\n          ...state,\n          users: [...action.payload]\n        };\n      }\n    case StoreEnum.SET_CURRENT_PAGE:\n      {\n        return {\n          ...state,\n          currentPage: action.payload\n        };\n      }\n    case StoreEnum.SET_TOTAL_USERS_COUNT:\n      {\n        return {\n          ...state,\n          totalUsersCount: action.payload\n        };\n      }\n    case StoreEnum.TOGGLE_IS_FETCHING:\n      {\n        return {\n          ...state,\n          isFetching: action.payload\n        };\n      }\n    case StoreEnum.TOGGLE_IS_SUBSCRIBING_PROGRESS:\n      {\n        return {\n          ...state,\n          followingInProgress: action.payload.isFetching ? [...state.followingInProgress, action.payload.id] : state.followingInProgress.filter(userId => {\n            userId !== action.payload.id;\n          })\n        };\n      }\n    default:\n      return state;\n  }\n};\nexport default usersReducer;","map":{"version":3,"names":["StoreEnum","initialState","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","state","arguments","length","undefined","action","type","USER_SUBSCRIBE","map","user","id","payload","followed","USER_UNSUBSCRIBE","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","TOGGLE_IS_SUBSCRIBING_PROGRESS","filter","userId"],"sources":["/home/INTEXSOFT/ivan.cherkas/PROJECTS/way-of-the-samurai/src/redux/reducers/users-reducer.ts"],"sourcesContent":["import { IUser } from '../../components/main-content/models/user.interface'\nimport { StoreEnum } from '../../utils/enums/store.enum'\nimport { IAction } from '../../utils/models/action.interface'\nimport { IUsersPage } from '../../utils/models/users-page.interface'\n\nconst initialState: IUsersPage = {\n  users: [],\n  pageSize: 20,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingInProgress: [],\n}\n\nconst usersReducer = (state: IUsersPage = initialState, action: IAction): IUsersPage => {\n  switch (action.type) {\n    case StoreEnum.USER_SUBSCRIBE: {\n      return {\n        ...state,\n        users: state.users.map((user: IUser) => {\n          if (user.id === action.payload) {\n            return { ...user, followed: true }\n          }\n          return user\n        }),\n      }\n    }\n    case StoreEnum.USER_UNSUBSCRIBE: {\n      return {\n        ...state,\n        users: state.users.map((user: IUser) => {\n          if (user.id === action.payload) {\n            return { ...user, followed: false }\n          }\n          return user\n        }),\n      }\n    }\n    case StoreEnum.SET_USERS: {\n      return {\n        ...state,\n        users: [...action.payload],\n      }\n    }\n    case StoreEnum.SET_CURRENT_PAGE: {\n      return { ...state, currentPage: action.payload }\n    }\n    case StoreEnum.SET_TOTAL_USERS_COUNT: {\n      return { ...state, totalUsersCount: action.payload }\n    }\n    case StoreEnum.TOGGLE_IS_FETCHING: {\n      return { ...state, isFetching: action.payload }\n    }\n    case StoreEnum.TOGGLE_IS_SUBSCRIBING_PROGRESS: {\n      return {\n        ...state,\n        followingInProgress: action.payload.isFetching\n          ? [...state.followingInProgress, action.payload.id]\n          : state.followingInProgress.filter((userId: number) => {\n              userId !== action.payload.id\n            }),\n      }\n    }\n    default:\n      return state\n  }\n}\nexport default usersReducer\n"],"mappings":"AACA,SAASA,SAAS,QAAQ,8BAA8B;AAIxD,MAAMC,YAAwB,GAAG;EAC/BC,KAAK,EAAE,EAAE;EACTC,QAAQ,EAAE,EAAE;EACZC,eAAe,EAAE,CAAC;EAClBC,WAAW,EAAE,CAAC;EACdC,UAAU,EAAE,KAAK;EACjBC,mBAAmB,EAAE;AACvB,CAAC;AAED,MAAMC,YAAY,GAAG,SAAAA,CAAA,EAAmE;EAAA,IAAlEC,KAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGT,YAAY;EAAA,IAAEY,MAAe,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EACrE,QAAQC,MAAM,CAACC,IAAI;IACjB,KAAKd,SAAS,CAACe,cAAc;MAAE;QAC7B,OAAO;UACL,GAAGN,KAAK;UACRP,KAAK,EAAEO,KAAK,CAACP,KAAK,CAACc,GAAG,CAAEC,IAAW,IAAK;YACtC,IAAIA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACM,OAAO,EAAE;cAC9B,OAAO;gBAAE,GAAGF,IAAI;gBAAEG,QAAQ,EAAE;cAAK,CAAC;YACpC;YACA,OAAOH,IAAI;UACb,CAAC;QACH,CAAC;MACH;IACA,KAAKjB,SAAS,CAACqB,gBAAgB;MAAE;QAC/B,OAAO;UACL,GAAGZ,KAAK;UACRP,KAAK,EAAEO,KAAK,CAACP,KAAK,CAACc,GAAG,CAAEC,IAAW,IAAK;YACtC,IAAIA,IAAI,CAACC,EAAE,KAAKL,MAAM,CAACM,OAAO,EAAE;cAC9B,OAAO;gBAAE,GAAGF,IAAI;gBAAEG,QAAQ,EAAE;cAAM,CAAC;YACrC;YACA,OAAOH,IAAI;UACb,CAAC;QACH,CAAC;MACH;IACA,KAAKjB,SAAS,CAACsB,SAAS;MAAE;QACxB,OAAO;UACL,GAAGb,KAAK;UACRP,KAAK,EAAE,CAAC,GAAGW,MAAM,CAACM,OAAO;QAC3B,CAAC;MACH;IACA,KAAKnB,SAAS,CAACuB,gBAAgB;MAAE;QAC/B,OAAO;UAAE,GAAGd,KAAK;UAAEJ,WAAW,EAAEQ,MAAM,CAACM;QAAQ,CAAC;MAClD;IACA,KAAKnB,SAAS,CAACwB,qBAAqB;MAAE;QACpC,OAAO;UAAE,GAAGf,KAAK;UAAEL,eAAe,EAAES,MAAM,CAACM;QAAQ,CAAC;MACtD;IACA,KAAKnB,SAAS,CAACyB,kBAAkB;MAAE;QACjC,OAAO;UAAE,GAAGhB,KAAK;UAAEH,UAAU,EAAEO,MAAM,CAACM;QAAQ,CAAC;MACjD;IACA,KAAKnB,SAAS,CAAC0B,8BAA8B;MAAE;QAC7C,OAAO;UACL,GAAGjB,KAAK;UACRF,mBAAmB,EAAEM,MAAM,CAACM,OAAO,CAACb,UAAU,GAC1C,CAAC,GAAGG,KAAK,CAACF,mBAAmB,EAAEM,MAAM,CAACM,OAAO,CAACD,EAAE,CAAC,GACjDT,KAAK,CAACF,mBAAmB,CAACoB,MAAM,CAAEC,MAAc,IAAK;YACnDA,MAAM,KAAKf,MAAM,CAACM,OAAO,CAACD,EAAE;UAC9B,CAAC;QACP,CAAC;MACH;IACA;MACE,OAAOT,KAAK;EAChB;AACF,CAAC;AACD,eAAeD,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}